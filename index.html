<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Müfredata Uygun Hece Çalışması (A-E-İ-U-O | T-L-N-R-K | +M)</title>
<style>
  :root{--bg:#0b1220;--fg:#e6eef7;--muted:#9fb0c6;--card:#101828;--accent:#22c55e}
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;display:flex;align-items:center;justify-content:center;padding:14px}
  .wrap{width:min(1100px,96vw);display:grid;gap:14px}
  .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
  .box{background:#0a1222;border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:10px 12px}
  .title{font-weight:700;color:var(--muted);font-size:13px;margin-bottom:6px;letter-spacing:.3px}
  select,input[type="number"]{background:#0a1020;color:var(--fg);border:1px solid rgba(255,255,255,.16);border-radius:10px;padding:8px 10px;font-size:14px}
  label{font-size:13px;color:var(--fg);display:flex;gap:6px;align-items:center}
  .pill{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.1);border-radius:999px;padding:6px 10px;font-size:12px}
  .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:22px;cursor:pointer}
  .syll{font-weight:900;line-height:1;text-align:center;font-size:min(22vw,170px);letter-spacing:.02em;user-select:none}
  .hint{margin-top:8px;text-align:center;color:var(--muted);font-size:13px}
  .row{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .bar{height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden;outline:1px solid rgba(255,255,255,.06)}
  .fill{height:100%;width:0;background:var(--accent);transition:width .2s linear}
  .kbd{border:1px solid rgba(255,255,255,.2);background:#0b1220;border-radius:6px;padding:2px 6px;font-size:12px}
  .stat{color:var(--muted);font-size:13px}
</style>
</head>
<body>
<div class="wrap">

  <div class="controls">
    <div class="box">
      <div class="title">Harf Seti</div>
      <select id="setSelect">
        <option value="base" selected>A-E-İ-U-O + T-L-N-R-K (bugün)</option>
        <option value="withM">A-E-İ-U-O + T-L-N-R-K + M (haftaya M)</option>
      </select>
    </div>

    <div class="box">
      <div class="title">Ünite/Bölüm</div>
      <select id="unitSelect">
        <option value="ALL" selected>Hepsi (karışık)</option>
        <option value="EL">EL (el/le/ele…)</option>
        <option value="AL">AL (al/la/ala…)</option>
        <option value="K">K (ke/ek/kel/lek…)</option>
        <option value="I">İ (il/li/ik/ki…)</option>
        <option value="N">N (ne/en/na/an/ni/in…)</option>
        <option value="O">O (ok/ko/ol/lo/on/no…)</option>
        <option value="U">U (ul/lu/un/nu/uk/ku/um/mu*)</option>
        <option value="T">T (ta/at/te/et/ti/it/to/ot/tu/ut…)</option>
        <option value="R">R (ra/ar/re/er/ri/ir/ro/or/ru/ur…)</option>
        <option value="M">M (ma/am/me/em/mi/im/mo/om/mu/um)</option>
      </select>
    </div>

    <div class="box">
      <div class="title">Sayaç (sn)</div>
      <input id="sec" type="number" min="2" max="60" value="15" style="width:90px"/>
    </div>

    <div class="box">
      <div class="title">Kurallar</div>
      <label><input type="checkbox" id="onlyBook" checked/> Yalnız “kitaptaki” heceler (beyaz liste)</label>
      <label><input type="checkbox" id="noGStart" checked/> Başta “ğ” çıkarma (zaten listede yok)</label>
    </div>

    <div class="pill" id="countView">Havuz: – hece</div>
  </div>

  <div id="card" class="card" aria-label="Hece kartı — tıkla/Space ile değiştir">
    <div id="syll" class="syll">Hazır</div>
    <div class="hint">Tıkla / dokun veya <span class="kbd">Space</span> • <span class="kbd">→</span> • <span class="kbd">Enter</span> — anında yeni hece (otomatik süre dolar)</div>
  </div>

  <div class="row">
    <div class="stat">Kalan: <b id="left">10.0</b> sn</div>
    <div class="stat">Kaynak: 1. Sınıf Hece Kitabım (bölümlere göre derlenmiştir)</div>
  </div>
  <div class="bar"><div id="fill" class="fill"></div></div>
</div>

<script>
/* 
  BEYAZ LİSTE (yalnız kitapta geçen heceler – ilgili sayfa/bölümlerden derlenmiş alt kümeler)
  Not: Bu liste bugünkü harf kapsamına (A-E-İ-U-O + T-L-N-R-K) ve “haftaya M” genişlemesine göre hazırlanmıştır.
  İhtiyaç olursa aynı yapıya başka sayfa hecelerini de ekleyebilirsin.
*/

// EL bölümü (el/le/ele/elle/…)
const SET_EL = [
  "el","le","ele","elle","lel"
];

// AL bölümü (al/la/ala/…)
const SET_AL = [
  "al","la","ala"
];

// K bölümü (ke/ek/kel/lek/kal/lak/elek/kelek… → hece odaklı kısa parçalar)
const SET_K = [
  "ke","ek","kel","lek","kal","lak"
];

// İ bölümü (il/li/ik/ki…)
const SET_I = [
  "il","li","ik","ki"
];

// N bölümü (ne/en/na/an/ni/in, ayrıca bazı iki heceli parçalananlardan tek heceler)
const SET_N = [
  "ne","en","na","an","ni","in"
];

// O bölümü (ok/ko/ol/lo/on/no…)
const SET_O = [
  "ok","ko","ol","lo","on","no"
];

// U bölümü (ul/lu/un/nu/uk/ku/um/mu* — mu/um yalnız M açıkken dahil)
const SET_U_BASE = [
  "ul","lu","un","nu","uk","ku"
];
const SET_U_WITH_M = [
  ...SET_U_BASE,"um","mu"
];

// T bölümü (temel çiftler)
const SET_T = [
  "ta","at","te","et","ti","it","to","ot","tu","ut"
];

// R bölümü (ra/ar/re/er/ri/ir/ro/or/ru/ur)
const SET_R = [
  "ra","ar","re","er","ri","ir","ro","or","ru","ur"
];

// M bölümü (haftaya)
const SET_M = [
  "ma","am","me","em","mi","im","mo","om","mu","um"
];

// Güncel kapsam: bugünkü (M kapalı) ve haftaya (M açık)
function getAllSets(withM){
  return {
    EL: SET_EL,
    AL: SET_AL,
    K:  SET_K,
    I:  SET_I,
    N:  SET_N,
    O:  SET_O,
    U:  withM ? SET_U_WITH_M : SET_U_BASE,
    T:  SET_T,
    R:  SET_R,
    M:  withM ? SET_M : [] // bugünde kapalı
  };
}

// --- Yardımcılar ---
function trUCFirst(s){ return s ? s.charAt(0).toLocaleUpperCase('tr-TR') + s.slice(1) : s; }
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a }

// --- DOM ---
const $set = document.getElementById('setSelect');
const $unit = document.getElementById('unitSelect');
const $sec = document.getElementById('sec');
const $onlyBook = document.getElementById('onlyBook');
const $noGStart = document.getElementById('noGStart');
const $syll = document.getElementById('syll');
const $card = document.getElementById('card');
const $fill = document.getElementById('fill');
const $left = document.getElementById('left');
const $countView = document.getElementById('countView');

let POOL=[], idx=-1, elapsed=0, timer=null;

function buildPool(){
  const withM = ($set.value === 'withM');
  const data = getAllSets(withM);
  let pool = [];

  const chosen = $unit.value;
  if(chosen === 'ALL'){
    pool = [
      ...data.EL, ...data.AL, ...data.K, ...data.I, ...data.N,
      ...data.O,  ...data.U,  ...data.T, ...data.R, ...data.M
    ];
  } else {
    pool = (data[chosen] || []);
  }

  // Temizlik: başta ğ olmasın seçeneği (zaten listede yok ama güvence)
  if($noGStart.checked) pool = pool.filter(s => !s.startsWith("ğ"));

  // Sadece kitap heceleri: true ise olduğu gibi; false ise (gerekirse) genişletme yapılabilirdi.
  // (Biz beyaz listede kalıyoruz.)
  POOL = shuffle([...new Set(pool)]);
  idx = -1;
  $countView.textContent = "Havuz: " + POOL.length.toLocaleString('tr-TR') + " hece";
}

function nextSyll(){
  if(!POOL.length){ $syll.textContent="—"; return; }
  idx = (idx + 1) % POOL.length;
  $syll.textContent = trUCFirst(POOL[idx]);
  resetTimer();
}

function resetTimer(){ elapsed = 0; renderProgress(); }
function renderProgress(){
  const sec = Math.max(2, Math.min(60, Number($sec.value)||10));
  const remain = Math.max(0, sec - elapsed);
  $left.textContent = remain.toFixed(1);
  const pct = Math.min(100, Math.max(0, (elapsed/sec)*100));
  $fill.style.width = pct + '%';
}
function loop(){
  const sec = Math.max(2, Math.min(60, Number($sec.value)||10));
  elapsed += 0.1;
  if(elapsed >= sec) nextSyll(); else renderProgress();
}
function start(){ if(timer) clearInterval(timer); timer = setInterval(loop, 100); }

// Etkileşimler
$card.addEventListener('click', nextSyll);
document.addEventListener('keydown', (e)=>{
  if(e.code==='Space'||e.key==='Enter'||e.key==='ArrowRight'){ e.preventDefault(); nextSyll(); }
});
$set.addEventListener('change', ()=>{ buildPool(); nextSyll(); });
$unit.addEventListener('change', ()=>{ buildPool(); nextSyll(); });
$onlyBook.addEventListener('change', ()=>{ buildPool(); nextSyll(); });
$noGStart.addEventListener('change', ()=>{ buildPool(); nextSyll(); });
$sec.addEventListener('change', resetTimer);

// İlk yükleme
buildPool(); nextSyll(); start();
</script>
</body>
</html>
